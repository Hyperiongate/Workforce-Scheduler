{# templates/schedule_selection.html #}
{# Schedule Pattern Selection Page - Consolidated Patterns #}
{# Author: Workforce Scheduler Development Team #}
{# Created: 09/30/2025 #}
{# Last Modified: 09/30/2025 #}
{# 
   Changes:
   - 09/30/2025: Consolidated patterns with variations into single options
   - 09/30/2025: Removed Panama and EOWEO patterns
   - 09/30/2025: Pitman, 4-on-4-off, 3-on-3-off, Southern Swing all have variations selected in wizard
   - 09/30/2025: Total of 10 main pattern choices (with variations handled in wizard)
#}

{% extends "base.html" %}
{% block title %}Select Schedule Pattern{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <div>
                    <h1 class="h2">Create New Schedule</h1>
                    <p class="text-muted">Select a schedule pattern to create your workforce schedule</p>
                </div>
                <a href="{{ url_for('supervisor.dashboard') }}" class="btn btn-outline-secondary">
                    <i class="bi bi-arrow-left"></i> Back to Dashboard
                </a>
            </div>
        </div>
    </div>

    <!-- Pattern Selection Grid - Consolidated Patterns -->
    <div class="pattern-grid" id="patternGrid">
        
        <!-- Pitman Pattern (Consolidated) -->
        <div class="pattern-card" data-pattern="pitman">
            <div class="pattern-badge twelve-hour">12 Hour</div>
            <div class="pattern-header">
                <h4><i class="bi bi-calendar2-week text-primary"></i> Pitman (2-2-3)</h4>
            </div>
            <div class="pattern-description">
                Work 2 days, off 2, work 3 days, off 2, work 2 days, off 3
            </div>
            <div class="pattern-details">
                <div class="detail-row">
                    <span class="detail-label">Cycle:</span>
                    <span class="detail-value">14 days</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Average Hours:</span>
                    <span class="detail-value">42 hours/week</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Variations:</span>
                    <span class="detail-value">Fixed, Rapid, 2-Week, 4-Week Rotation</span>
                </div>
            </div>
            <div class="pros-cons">
                <div class="pros">
                    <h6 class="text-success">Advantages:</h6>
                    <ul>
                        <li>Every other weekend off</li>
                        <li>Never more than 3 consecutive shifts</li>
                        <li>Well-balanced coverage</li>
                        <li>Proven 24/7 pattern</li>
                    </ul>
                </div>
                <div class="cons">
                    <h6 class="text-warning">Considerations:</h6>
                    <ul>
                        <li>Can work 7 days across week boundaries</li>
                        <li>Must start on Sunday to minimize OT</li>
                        <li>Complex initially to understand</li>
                    </ul>
                </div>
            </div>
            <div class="pattern-footer">
                <button class="btn btn-primary w-100 select-pattern" data-pattern="pitman">
                    SELECT PITMAN SCHEDULE
                </button>
            </div>
        </div>

        <!-- DuPont Pattern (Consolidated) -->
        <div class="pattern-card" data-pattern="dupont">
            <div class="pattern-badge twelve-hour">12 Hour</div>
            <div class="pattern-header">
                <h4><i class="bi bi-calendar-range text-info"></i> DuPont</h4>
            </div>
            <div class="pattern-description">
                4 nights, 3 off, 3 days, 1 off, 3 nights, 3 off, 4 days, 7 off
            </div>
            <div class="pattern-details">
                <div class="detail-row">
                    <span class="detail-label">Cycle:</span>
                    <span class="detail-value">28 days (4 weeks)</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Average Hours:</span>
                    <span class="detail-value">42 hours/week</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Variations:</span>
                    <span class="detail-value">Rotating or Fixed</span>
                </div>
            </div>
            <div class="pros-cons">
                <div class="pros">
                    <h6 class="text-success">Advantages:</h6>
                    <ul>
                        <li>7 consecutive days off every cycle</li>
                        <li>Built-in recovery periods</li>
                        <li>Popular in industry</li>
                        <li>Good work-life balance</li>
                    </ul>
                </div>
                <div class="cons">
                    <h6 class="text-warning">Considerations:</h6>
                    <ul>
                        <li>Complex pattern to learn</li>
                        <li>Long work stretches before break</li>
                        <li>Must coordinate crew changes</li>
                    </ul>
                </div>
            </div>
            <div class="pattern-footer">
                <button class="btn btn-info w-100 select-pattern" data-pattern="dupont">
                    SELECT DUPONT SCHEDULE
                </button>
            </div>
        </div>

        <!-- 4-on-4-off Pattern (Consolidated) -->
        <div class="pattern-card" data-pattern="four_on_four_off">
            <div class="pattern-badge twelve-hour">12 Hour</div>
            <div class="pattern-header">
                <h4><i class="bi bi-arrow-repeat text-success"></i> 4-on-4-off</h4>
            </div>
            <div class="pattern-description">
                Work 4 consecutive days, off 4 consecutive days
            </div>
            <div class="pattern-details">
                <div class="detail-row">
                    <span class="detail-label">Cycle:</span>
                    <span class="detail-value">8 days</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Average Hours:</span>
                    <span class="detail-value">42 hours/week</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Variations:</span>
                    <span class="detail-value">Basic, Modified, Fixed, Fast/Weekly Rotation</span>
                </div>
            </div>
            <div class="pros-cons">
                <div class="pros">
                    <h6 class="text-success">Advantages:</h6>
                    <ul>
                        <li>Simple and predictable</li>
                        <li>Equal work and rest days</li>
                        <li>Good recovery time</li>
                        <li>Multiple rotation options</li>
                    </ul>
                </div>
                <div class="cons">
                    <h6 class="text-warning">Considerations:</h6>
                    <ul>
                        <li>Weekend coverage varies</li>
                        <li>Split shift option (2D-2N) is tough</li>
                        <li>Modified version has irregular stretches</li>
                    </ul>
                </div>
            </div>
            <div class="pattern-footer">
                <button class="btn btn-success w-100 select-pattern" data-pattern="four_on_four_off">
                    SELECT 4-ON-4-OFF
                </button>
            </div>
        </div>

        <!-- 3-on-3-off Pattern (Consolidated) -->
        <div class="pattern-card" data-pattern="three_on_three_off">
            <div class="pattern-badge twelve-hour">12 Hour</div>
            <div class="pattern-header">
                <h4><i class="bi bi-calendar3 text-purple"></i> 3-on-3-off</h4>
            </div>
            <div class="pattern-description">
                Work 3 consecutive days, off 3 consecutive days
            </div>
            <div class="pattern-details">
                <div class="detail-row">
                    <span class="detail-label">Cycle:</span>
                    <span class="detail-value">6 days</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Average Hours:</span>
                    <span class="detail-value">42 hours/week</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Variations:</span>
                    <span class="detail-value">Basic, Fixed Complex, Weekly/6-Week Rotation</span>
                </div>
            </div>
            <div class="pros-cons">
                <div class="pros">
                    <h6 class="text-success">Advantages:</h6>
                    <ul>
                        <li>Shorter work stretches</li>
                        <li>Regular pattern</li>
                        <li>3 full weekends off/6 weeks (modified)</li>
                        <li>Good for fatigue management</li>
                    </ul>
                </div>
                <div class="cons">
                    <h6 class="text-warning">Considerations:</h6>
                    <ul>
                        <li>Split weekends in basic version</li>
                        <li>Modified creates 2 and 4-day stretches</li>
                        <li>6-week full rotation</li>
                    </ul>
                </div>
            </div>
            <div class="pattern-footer">
                <button class="btn btn-purple w-100 select-pattern" data-pattern="three_on_three_off">
                    SELECT 3-ON-3-OFF
                </button>
            </div>
        </div>

        <!-- Southern Swing Pattern (Consolidated) -->
        <div class="pattern-card" data-pattern="southern_swing">
            <div class="pattern-badge eight-hour">8 Hour</div>
            <div class="pattern-header">
                <h4><i class="bi bi-shuffle text-danger"></i> Southern Swing</h4>
            </div>
            <div class="pattern-description">
                Rotate through days→evenings→nights over 4 weeks
            </div>
            <div class="pattern-details">
                <div class="detail-row">
                    <span class="detail-label">Cycle:</span>
                    <span class="detail-value">28 days (4 weeks)</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Average Hours:</span>
                    <span class="detail-value">40 hours/week</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Variations:</span>
                    <span class="detail-value">Clockwise, Counter-clockwise, Fixed</span>
                </div>
            </div>
            <div class="pros-cons">
                <div class="pros">
                    <h6 class="text-success">Advantages:</h6>
                    <ul>
                        <li>Experience all shift types</li>
                        <li>Forward rotation (healthier)</li>
                        <li>Traditional 8-hour shifts</li>
                        <li>273 work days/year</li>
                    </ul>
                </div>
                <div class="cons">
                    <h6 class="text-warning">Considerations:</h6>
                    <ul>
                        <li>Only 1 weekend off per month</li>
                        <li>Constant shift rotation</li>
                        <li>More work days than 12-hour</li>
                    </ul>
                </div>
            </div>
            <div class="pattern-footer">
                <button class="btn btn-danger w-100 select-pattern" data-pattern="southern_swing">
                    SELECT SOUTHERN SWING
                </button>
            </div>
        </div>

        <!-- Fixed-Fixed Pattern -->
        <div class="pattern-card" data-pattern="fixed_fixed">
            <div class="pattern-badge twelve-hour">12 Hour</div>
            <div class="pattern-header">
                <h4><i class="bi bi-people-fill text-warning"></i> Fixed-Fixed</h4>
            </div>
            <div class="pattern-description">
                Mon-Thu crews (4x12) work 48hrs, Fri-Sun crews (3x12) work 36hrs
            </div>
            <div class="pattern-details">
                <div class="detail-row">
                    <span class="detail-label">Cycle:</span>
                    <span class="detail-value">7 days (weekly)</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Average Hours:</span>
                    <span class="detail-value">48 or 36 hours/week</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Max Consecutive:</span>
                    <span class="detail-value">4 days (Mon-Thu) or 3 (Fri-Sun)</span>
                </div>
            </div>
            <div class="pros-cons">
                <div class="pros">
                    <h6 class="text-success">Advantages:</h6>
                    <ul>
                        <li>Completely predictable schedule</li>
                        <li>No rotation stress</li>
                        <li>Lifestyle choice (weekdays vs weekends)</li>
                        <li>3-day weekends for Mon-Thu crews</li>
                    </ul>
                </div>
                <div class="cons">
                    <h6 class="text-warning">Considerations:</h6>
                    <ul>
                        <li>Unequal hours (48 vs 36)</li>
                        <li>Weekend crews work every weekend</li>
                        <li>No variety in schedule</li>
                    </ul>
                </div>
            </div>
            <div class="pattern-footer">
                <button class="btn btn-warning w-100 select-pattern" data-pattern="fixed_fixed">
                    SELECT FIXED-FIXED
                </button>
            </div>
        </div>

        <!-- 5&2 Pattern -->
        <div class="pattern-card" data-pattern="five_and_two">
            <div class="pattern-badge twelve-hour">12 Hour</div>
            <div class="pattern-header">
                <h4><i class="bi bi-calendar2 text-indigo"></i> 5&2 Schedule</h4>
            </div>
            <div class="pattern-description">
                Work stretches of 5 and 2 days, off stretches of 5 and 2 days
            </div>
            <div class="pattern-details">
                <div class="detail-row">
                    <span class="detail-label">Cycle:</span>
                    <span class="detail-value">28 days (4 patterns)</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Average Hours:</span>
                    <span class="detail-value">42 hours/week</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Max Consecutive:</span>
                    <span class="detail-value">5 days</span>
                </div>
            </div>
            <div class="pros-cons">
                <div class="pros">
                    <h6 class="text-success">Advantages:</h6>
                    <ul>
                        <li>Fixed shifts (no rotation)</li>
                        <li>Balanced coverage</li>
                        <li>Predictable off periods</li>
                        <li>Good for planning</li>
                    </ul>
                </div>
                <div class="cons">
                    <h6 class="text-warning">Considerations:</h6>
                    <ul>
                        <li>Complex 4 different cycles</li>
                        <li>5 consecutive days is tough</li>
                        <li>Pattern hard to memorize</li>
                    </ul>
                </div>
            </div>
            <div class="pattern-footer">
                <button class="btn btn-indigo w-100 select-pattern" data-pattern="five_and_two">
                    SELECT 5&2 SCHEDULE
                </button>
            </div>
        </div>

        <!-- Alternating Fixed (3-4-3-4) Pattern -->
        <div class="pattern-card" data-pattern="alternating_fixed">
            <div class="pattern-badge twelve-hour">12 Hour</div>
            <div class="pattern-header">
                <h4><i class="bi bi-diagram-3 text-teal"></i> Alternating Fixed (3-4-3-4)</h4>
            </div>
            <div class="pattern-description">
                Semi-fixed: core 3 days always worked, 4th day alternates
            </div>
            <div class="pattern-details">
                <div class="detail-row">
                    <span class="detail-label">Cycle:</span>
                    <span class="detail-value">14 days (2 weeks)</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Average Hours:</span>
                    <span class="detail-value">42 hours/week</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Max Consecutive:</span>
                    <span class="detail-value">4 days</span>
                </div>
            </div>
            <div class="pros-cons">
                <div class="pros">
                    <h6 class="text-success">Advantages:</h6>
                    <ul>
                        <li>Mostly predictable schedule</li>
                        <li>Balances weekend work</li>
                        <li>One crew Sun, other Sat</li>
                        <li>Can be fixed or rotating</li>
                    </ul>
                </div>
                <div class="cons">
                    <h6 class="text-warning">Considerations:</h6>
                    <ul>
                        <li>Alternating 4th day confusing</li>
                        <li>Weekend work required</li>
                        <li>Pattern takes adjustment</li>
                    </ul>
                </div>
            </div>
            <div class="pattern-footer">
                <button class="btn btn-teal w-100 select-pattern" data-pattern="alternating_fixed">
                    SELECT ALTERNATING FIXED
                </button>
            </div>
        </div>

        <!-- Continental Pattern -->
        <div class="pattern-card" data-pattern="continental">
            <div class="pattern-badge eight-hour">8 Hour</div>
            <div class="pattern-header">
                <h4><i class="bi bi-flag text-secondary"></i> Continental</h4>
            </div>
            <div class="pattern-description">
                2 days, 2 evenings, 2 nights, 2 off - rotate through all shifts
            </div>
            <div class="pattern-details">
                <div class="detail-row">
                    <span class="detail-label">Cycle:</span>
                    <span class="detail-value">8 days</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Average Hours:</span>
                    <span class="detail-value">42 hours/week</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Max Consecutive:</span>
                    <span class="detail-value">2 days</span>
                </div>
            </div>
            <div class="pros-cons">
                <div class="pros">
                    <h6 class="text-success">Advantages:</h6>
                    <ul>
                        <li>Short work stretches</li>
                        <li>Experience all shifts</li>
                        <li>European standard</li>
                        <li>Never more than 2 in a row</li>
                    </ul>
                </div>
                <div class="cons">
                    <h6 class="text-warning">Considerations:</h6>
                    <ul>
                        <li>Constant rotation stress</li>
                        <li>Body clock adjustment hard</li>
                        <li>Weekend coverage varies</li>
                    </ul>
                </div>
            </div>
            <div class="pattern-footer">
                <button class="btn btn-secondary w-100 select-pattern" data-pattern="continental">
                    SELECT CONTINENTAL
                </button>
            </div>
        </div>

    </div>
</div>

<style>
/* Pattern Card Styles - Updated 09/30/2025 */
.pattern-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
    gap: 25px;
    padding: 20px 0;
}

.pattern-card {
    background: white;
    border-radius: 15px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    overflow: hidden;
    transition: all 0.3s ease;
    border: 2px solid transparent;
    position: relative;
    display: flex;
    flex-direction: column;
}

.pattern-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
    border-color: #007bff;
}

.pattern-badge {
    position: absolute;
    top: 15px;
    right: 15px;
    padding: 5px 12px;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    z-index: 1;
}

.pattern-badge.twelve-hour {
    background: #e3f2fd;
    color: #1976d2;
}

.pattern-badge.eight-hour {
    background: #fff3e0;
    color: #f57c00;
}

.pattern-header {
    padding: 20px 20px 10px;
}

.pattern-header h4 {
    margin: 0;
    font-size: 1.25rem;
    font-weight: 600;
    color: #2d3748;
}

.pattern-description {
    padding: 0 20px 15px;
    color: #6c757d;
    font-size: 0.9rem;
    line-height: 1.5;
}

.pattern-details {
    background: #f8f9fa;
    padding: 15px 20px;
    border-top: 1px solid #e9ecef;
    border-bottom: 1px solid #e9ecef;
}

.detail-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 5px 0;
}

.detail-label {
    font-weight: 600;
    color: #495057;
    font-size: 0.85rem;
}

.detail-value {
    color: #6c757d;
    font-size: 0.85rem;
    text-align: right;
}

.pros-cons {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
    padding: 20px;
    flex-grow: 1;
}

.pros h6, .cons h6 {
    font-size: 0.85rem;
    font-weight: 600;
    margin-bottom: 10px;
}

.pros ul, .cons ul {
    list-style: none;
    padding: 0;
    margin: 0;
    font-size: 0.8rem;
}

.pros li, .cons li {
    padding: 3px 0;
    position: relative;
    padding-left: 16px;
}

.pros li:before {
    content: "✓";
    position: absolute;
    left: 0;
    color: #28a745;
    font-weight: bold;
}

.cons li:before {
    content: "•";
    position: absolute;
    left: 0;
    color: #ffc107;
}

.pattern-footer {
    padding: 20px;
    background: #f8f9fa;
    border-top: 1px solid #e9ecef;
    margin-top: auto;
}

.select-pattern {
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    padding: 12px;
    border-radius: 8px;
    transition: all 0.3s ease;
}

.select-pattern:hover {
    transform: scale(1.02);
    box-shadow: 0 4px 12px rgba(0, 123, 255, 0.25);
}

/* Custom button colors */
.btn-purple {
    background: #6f42c1;
    border-color: #6f42c1;
    color: white;
}

.btn-purple:hover {
    background: #5a32a3;
    border-color: #5a32a3;
    color: white;
}

.btn-teal {
    background: #20c997;
    border-color: #20c997;
    color: white;
}

.btn-teal:hover {
    background: #1ba37e;
    border-color: #1ba37e;
    color: white;
}

.btn-indigo {
    background: #6610f2;
    border-color: #6610f2;
    color: white;
}

.btn-indigo:hover {
    background: #520dc2;
    border-color: #520dc2;
    color: white;
}

.text-purple {
    color: #6f42c1 !important;
}

.text-teal {
    color: #20c997 !important;
}

.text-indigo {
    color: #6610f2 !important;
}

/* Loading state */
.pattern-card.loading {
    opacity: 0.6;
    pointer-events: none;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .pattern-grid {
        grid-template-columns: 1fr;
        gap: 20px;
        padding: 10px;
    }
    
    .pros-cons {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 1200px) {
    .pattern-grid {
        grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
    }
}
</style>

<script>
// Pattern Selection JavaScript - Updated 09/30/2025
document.addEventListener('DOMContentLoaded', function() {
    console.log('Initializing pattern selection page...');
    
    // Pattern selection
    document.querySelectorAll('.select-pattern').forEach(button => {
        button.addEventListener('click', function() {
            const pattern = this.dataset.pattern;
            const card = this.closest('.pattern-card');
            
            // Add loading state
            card.classList.add('loading');
            
            // Show loading state in button
            const originalText = this.innerHTML;
            this.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>Loading...';
            this.disabled = true;
            
            // Navigate to wizard after short delay for visual feedback
            setTimeout(() => {
                window.location.href = `/schedule/wizard/${pattern}`;
            }, 300);
        });
    });
    
    // Add hover effects to cards
    document.querySelectorAll('.pattern-card').forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.borderColor = '#007bff';
        });
        
        card.addEventListener('mouseleave', function() {
            if (!this.classList.contains('loading')) {
                this.style.borderColor = 'transparent';
            }
        });
    });
    
    console.log('Pattern selection page initialized');
});
</script>
{% endblock %}

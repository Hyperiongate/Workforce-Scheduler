{% extends "base.html" %}
{% block title %}Select Schedule Pattern{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <div>
                    <h1 class="h2">Create New Schedule</h1>
                    <p class="text-muted">Select a schedule pattern to create your workforce schedule</p>
                </div>
                <a href="{{ url_for('supervisor.dashboard') }}" class="btn btn-outline-secondary">
                    <i class="bi bi-arrow-left"></i> Back to Dashboard
                </a>
            </div>
        </div>
    </div>

    <!-- Pattern Selection Grid -->
    <div class="row">
        <div class="col-12">
            <div class="pattern-grid">
                
                <!-- Pitman Pattern -->
                <div class="pattern-card" data-pattern="pitman">
                    <div class="pattern-header">
                        <h4><i class="bi bi-calendar2-week text-primary"></i> Pitman (2-2-3)</h4>
                        <span class="badge bg-success">Recommended</span>
                    </div>
                    <div class="pattern-body">
                        <p class="pattern-description">2 days on, 2 off, 3 on, 2 off, 2 on, 3 off</p>
                        <div class="pattern-details">
                            <div class="detail-item">
                                <strong>Shift Length:</strong> 12 hours
                            </div>
                            <div class="detail-item">
                                <strong>Cycle:</strong> 14 days
                            </div>
                            <div class="detail-item">
                                <strong>Variations:</strong> Fixed, Rapid Rotation, 2-Week, 4-Week
                            </div>
                        </div>
                        <div class="pros-cons">
                            <div class="pros">
                                <h6>Advantages:</h6>
                                <ul>
                                    <li>Every other weekend off</li>
                                    <li>No more than 3 consecutive days</li>
                                    <li>Balanced coverage</li>
                                </ul>
                            </div>
                            <div class="cons">
                                <h6>Considerations:</h6>
                                <ul>
                                    <li>Can have 7 days in a row across boundaries</li>
                                    <li>Requires crew coordination</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="pattern-footer">
                        <button class="btn btn-primary w-100 select-pattern" data-pattern="pitman">
                            Select Pitman Schedule
                        </button>
                    </div>
                </div>

                <!-- DuPont Pattern -->
                <div class="pattern-card" data-pattern="dupont">
                    <div class="pattern-header">
                        <h4><i class="bi bi-calendar3 text-info"></i> DuPont</h4>
                        <span class="badge bg-info">Popular</span>
                    </div>
                    <div class="pattern-body">
                        <p class="pattern-description">4 nights, 3 off, 3 days, 1 off, 3 nights, 3 off, 4 days, 7 off</p>
                        <div class="pattern-details">
                            <div class="detail-item">
                                <strong>Shift Length:</strong> 12 hours
                            </div>
                            <div class="detail-item">
                                <strong>Cycle:</strong> 28 days
                            </div>
                            <div class="detail-item">
                                <strong>Variations:</strong> Standard (rotating only)
                            </div>
                        </div>
                        <div class="pros-cons">
                            <div class="pros">
                                <h6>Advantages:</h6>
                                <ul>
                                    <li>7 consecutive days off</li>
                                    <li>Built-in recovery time</li>
                                    <li>Work-life balance</li>
                                </ul>
                            </div>
                            <div class="cons">
                                <h6>Considerations:</h6>
                                <ul>
                                    <li>Complex pattern</li>
                                    <li>Requires rotation</li>
                                    <li>Learning curve</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="pattern-footer">
                        <button class="btn btn-info w-100 select-pattern" data-pattern="dupont">
                            Select DuPont Schedule
                        </button>
                    </div>
                </div>

                <!-- Southern Swing Pattern -->
                <div class="pattern-card" data-pattern="southern_swing">
                    <div class="pattern-header">
                        <h4><i class="bi bi-arrow-repeat text-warning"></i> Southern Swing</h4>
                        <span class="badge bg-warning text-dark">8-Hour</span>
                    </div>
                    <div class="pattern-body">
                        <p class="pattern-description">Rotating through days, evenings, and nights</p>
                        <div class="pattern-details">
                            <div class="detail-item">
                                <strong>Shift Length:</strong> 8 hours
                            </div>
                            <div class="detail-item">
                                <strong>Cycle:</strong> 28 days
                            </div>
                            <div class="detail-item">
                                <strong>Variations:</strong> Standard
                            </div>
                        </div>
                        <div class="pros-cons">
                            <div class="pros">
                                <h6>Advantages:</h6>
                                <ul>
                                    <li>Gradual shift changes</li>
                                    <li>Experience all shifts</li>
                                    <li>Traditional pattern</li>
                                </ul>
                            </div>
                            <div class="cons">
                                <h6>Considerations:</h6>
                                <ul>
                                    <li>Only 1 weekend off per month</li>
                                    <li>Constant rotation</li>
                                    <li>More shift changes</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="pattern-footer">
                        <button class="btn btn-warning w-100 select-pattern" data-pattern="southern_swing">
                            Select Southern Swing
                        </button>
                    </div>
                </div>

                <!-- Fixed Teams Pattern -->
                <div class="pattern-card" data-pattern="fixed_fixed">
                    <div class="pattern-header">
                        <h4><i class="bi bi-people-fill text-success"></i> Fixed Teams</h4>
                        <span class="badge bg-secondary">Simple</span>
                    </div>
                    <div class="pattern-body">
                        <p class="pattern-description">Mon-Thu teams (4x12) and Fri-Sun teams (3x12)</p>
                        <div class="pattern-details">
                            <div class="detail-item">
                                <strong>Shift Length:</strong> 12 hours
                            </div>
                            <div class="detail-item">
                                <strong>Cycle:</strong> 7 days
                            </div>
                            <div class="detail-item">
                                <strong>Variations:</strong> Standard
                            </div>
                        </div>
                        <div class="pros-cons">
                            <div class="pros">
                                <h6>Advantages:</h6>
                                <ul>
                                    <li>Completely predictable</li>
                                    <li>Choose lifestyle</li>
                                    <li>Easy to understand</li>
                                </ul>
                            </div>
                            <div class="cons">
                                <h6>Considerations:</h6>
                                <ul>
                                    <li>Unequal hours</li>
                                    <li>Weekend teams work every weekend</li>
                                    <li>Less flexibility</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="pattern-footer">
                        <button class="btn btn-success w-100 select-pattern" data-pattern="fixed_fixed">
                            Select Fixed Teams
                        </button>
                    </div>
                </div>

                <!-- 4-on-4-off Pattern -->
                <div class="pattern-card" data-pattern="four_on_four_off">
                    <div class="pattern-header">
                        <h4><i class="bi bi-calendar4-week text-primary"></i> 4-on-4-off</h4>
                        <span class="badge bg-primary">Balanced</span>
                    </div>
                    <div class="pattern-body">
                        <p class="pattern-description">Work 4 days, off 4 days</p>
                        <div class="pattern-details">
                            <div class="detail-item">
                                <strong>Shift Length:</strong> 12 hours
                            </div>
                            <div class="detail-item">
                                <strong>Cycle:</strong> 8 days
                            </div>
                            <div class="detail-item">
                                <strong>Variations:</strong> Fixed, Rotating
                            </div>
                        </div>
                        <div class="pros-cons">
                            <div class="pros">
                                <h6>Advantages:</h6>
                                <ul>
                                    <li>Simple pattern</li>
                                    <li>Equal work/off days</li>
                                    <li>Good work-life balance</li>
                                </ul>
                            </div>
                            <div class="cons">
                                <h6>Considerations:</h6>
                                <ul>
                                    <li>Averages 42 hours/week</li>
                                    <li>May need overtime for coverage</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="pattern-footer">
                        <button class="btn btn-primary w-100 select-pattern" data-pattern="four_on_four_off">
                            Select 4-on-4-off
                        </button>
                    </div>
                </div>

                <!-- 5 & 2 Pattern -->
                <div class="pattern-card" data-pattern="five_and_two">
                    <div class="pattern-header">
                        <h4><i class="bi bi-calendar-range text-danger"></i> 5 & 2 Schedule</h4>
                        <span class="badge bg-outline-secondary">Advanced</span>
                    </div>
                    <div class="pattern-body">
                        <p class="pattern-description">Work stretches of 5 and 2 days</p>
                        <div class="pattern-details">
                            <div class="detail-item">
                                <strong>Shift Length:</strong> 12 hours
                            </div>
                            <div class="detail-item">
                                <strong>Cycle:</strong> 14 days
                            </div>
                            <div class="detail-item">
                                <strong>Variations:</strong> Fixed only
                            </div>
                        </div>
                        <div class="pros-cons">
                            <div class="pros">
                                <h6>Advantages:</h6>
                                <ul>
                                    <li>Long breaks</li>
                                    <li>Balanced coverage</li>
                                    <li>Predictable pattern</li>
                                </ul>
                            </div>
                            <div class="cons">
                                <h6>Considerations:</h6>
                                <ul>
                                    <li>Complex pattern</li>
                                    <li>5 consecutive work days</li>
                                    <li>Requires planning</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="pattern-footer">
                        <button class="btn btn-outline-danger w-100 select-pattern" data-pattern="five_and_two">
                            Select 5 & 2 Schedule
                        </button>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- Help Section -->
    <div class="row mt-5">
        <div class="col-12">
            <div class="card bg-light">
                <div class="card-header">
                    <h5><i class="bi bi-question-circle"></i> Need Help Choosing?</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4">
                            <h6>First Time?</h6>
                            <p>Start with <strong>Pitman (2-2-3)</strong> - it's widely used and balances work-life needs.</p>
                        </div>
                        <div class="col-md-4">
                            <h6>8-Hour Shifts?</h6>
                            <p>Choose <strong>Southern Swing</strong> for traditional 8-hour rotating shifts.</p>
                        </div>
                        <div class="col-md-4">
                            <h6>Want Predictability?</h6>
                            <p>Use <strong>Fixed Teams</strong> for completely predictable schedules.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.pattern-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: 2rem;
    margin-bottom: 2rem;
}

.pattern-card {
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.07);
    transition: all 0.3s ease;
    border: 2px solid transparent;
    overflow: hidden;
}

.pattern-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    border-color: #007bff;
}

.pattern-header {
    padding: 1.5rem 1.5rem 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
}

.pattern-header h4 {
    margin: 0;
    color: #333;
    font-weight: 600;
}

.pattern-header .badge {
    margin-left: auto;
}

.pattern-body {
    padding: 0 1.5rem;
}

.pattern-description {
    color: #666;
    font-size: 1rem;
    margin-bottom: 1rem;
    font-style: italic;
}

.pattern-details {
    background: #f8f9fa;
    padding: 1rem;
    border-radius: 6px;
    margin-bottom: 1rem;
}

.detail-item {
    margin-bottom: 0.5rem;
    font-size: 0.9rem;
}

.detail-item:last-child {
    margin-bottom: 0;
}

.pros-cons {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
    margin-bottom: 1rem;
}

.pros, .cons {
    font-size: 0.85rem;
}

.pros h6 {
    color: #28a745;
    margin-bottom: 0.5rem;
}

.cons h6 {
    color: #dc3545;
    margin-bottom: 0.5rem;
}

.pros ul, .cons ul {
    padding-left: 1rem;
    margin: 0;
}

.pros li, .cons li {
    margin-bottom: 0.25rem;
}

.pattern-footer {
    padding: 1.5rem;
    background: #f8f9fa;
    border-top: 1px solid #e9ecef;
}

.select-pattern {
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

@media (max-width: 768px) {
    .pattern-grid {
        grid-template-columns: 1fr;
        gap: 1rem;
    }
    
    .pros-cons {
        grid-template-columns: 1fr;
    }
    
    .pattern-card {
        margin-bottom: 1rem;
    }
    
    .pattern-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.5rem;
    }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Add click handlers to pattern selection buttons
    document.querySelectorAll('.select-pattern').forEach(button => {
        button.addEventListener('click', function() {
            const pattern = this.dataset.pattern;
            
            // Show loading state
            const originalText = this.innerHTML;
            this.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>Loading...';
            this.disabled = true;
            
            // Navigate to wizard
            setTimeout(() => {
                window.location.href = `/schedule/wizard/${pattern}`;
            }, 500);
        });
    });
    
    // Add hover effects to cards
    document.querySelectorAll('.pattern-card').forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.borderColor = '#007bff';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.borderColor = 'transparent';
        });
    });
});
</script>
{% endblock %}
